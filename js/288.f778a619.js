"use strict";(self["webpackChunkeduardo_app"]=self["webpackChunkeduardo_app"]||[]).push([[288],{7288:function(t,e,s){s.r(e),s.d(e,{default:function(){return Xt}});var o=s(3396),i=s(7139),a=s(9242);const c=t=>((0,o.dD)("data-v-1fc04d3b"),t=t(),(0,o.Cn)(),t),n={class:"main-content"},l=["src"],r=c((()=>(0,o._)("i",{class:"fa-solid fa-chart-simple"},null,-1))),d=c((()=>(0,o._)("span",null,"Business Dashboard",-1))),u=c((()=>(0,o._)("summary",{class:"inventory-summary"},[(0,o._)("i",{style:{padding:"10px",margin:"0"},class:"fa-solid fa-table"}),(0,o._)("span",{style:{padding:"0",margin:"0"},class:"dropdown-icon"},"â–¾"),(0,o._)("span",{style:{padding:"0",margin:"0"}},"Inventory Options")],-1))),h={class:"dropdown-menu"},p=c((()=>(0,o._)("i",{style:{"padding-right":"20px"},class:"fa-solid fa-house"},null,-1))),m=c((()=>(0,o._)("span",null,"Room Inventory",-1))),g=c((()=>(0,o._)("i",{style:{"padding-right":"20px"},class:"fa-solid fa-shop"},null,-1))),_=c((()=>(0,o._)("span",null,"Shop Inventory",-1))),f=c((()=>(0,o._)("i",{style:{"padding-right":"20px"},class:"fa-solid fa-shop"},null,-1))),y=c((()=>(0,o._)("span",null,"Cottage Inventory",-1))),k=c((()=>(0,o._)("i",{style:{"padding-right":"20px"},class:"fa-solid fa-utensils"},null,-1))),w=c((()=>(0,o._)("span",null,"Restaurant Reservations",-1))),b=c((()=>(0,o._)("i",{style:{"padding-right":"20px"},class:"fa-solid fa-person-swimming"},null,-1))),v=c((()=>(0,o._)("span",null,"Enrollment Inventory",-1))),I=c((()=>(0,o._)("i",{class:"fa-solid fa-people-group"},null,-1))),x=c((()=>(0,o._)("span",null,"Team",-1))),S=c((()=>(0,o._)("i",{class:"fas fa-user"},null,-1))),C=c((()=>(0,o._)("span",null,"Users",-1))),P=c((()=>(0,o._)("i",{class:"fa-solid fa-cart-plus"},null,-1))),q=c((()=>(0,o._)("span",null,"POS",-1))),T={class:"header"},E=c((()=>(0,o._)("h1",{class:"h1-main"},"EDUARDO'S ADMIN",-1))),D=c((()=>(0,o._)("i",{class:"fa-solid fa-bars",style:{padding:"5px",margin:"5px",width:"40px"}},null,-1))),Q=[D],z=c((()=>(0,o._)("i",{class:"fas fa-power-off logout-icon"},null,-1))),Z={class:"card-main"},N={class:"content"},R={class:"row"},W=c((()=>(0,o._)("h2",{class:"fa-solid fa-cart-plus"}," POS",-1))),$=c((()=>(0,o._)("br",null,null,-1))),O={class:"row g-4"},M={class:"col-lg-4 col-md-6 wow fadeInUp","data-wow-delay":"0.1s"},j={class:"room-item shadow rounded overflow-hidden card-menu"},U={class:"position-relative"},F=["src"],A={class:"position-absolute start-0 top-100 translate-middle-y bg-primary text-white rounded py-1 px-3 ms-4"},H={class:"p-4 mt-2"},K={class:"d-flex justify-content-between mb-3"},Y={class:"mb-0 text-dark"},B={class:"ps-2"},L={class:"d-flex mb-3"},V={class:"border-end me-3 pe-3"},G={class:"text-body mb-3"},J={class:"d-flex justify-content-between"},X={class:"input-group"},tt=["onClick"],et=c((()=>(0,o._)("i",{class:"fa fa-shopping-cart add-cart"}," Add to Cart ",-1))),st=[et],ot={key:0,class:"alert alert-primary mt-3",role:"alert"},it={class:"card card-default"},at={class:"table-responsive"},ct={class:"table"},nt=c((()=>(0,o._)("thead",null,[(0,o._)("tr",null,[(0,o._)("th",{class:"text-center"},"Product Name"),(0,o._)("th",{class:"text-center"},"Quantity"),(0,o._)("th",{class:"text-center"},"Price"),(0,o._)("th",{class:"text-center"},"Total Price"),(0,o._)("th",{class:"text-center"},"Action")])],-1))),lt={class:"align-middle"},rt={class:"product-item"},dt={class:"custom-control custom-checkbox",style:{float:"left","margin-right":"10px","margin-top":"10px"}},ut=["id","value","onClick"],ht=["for"],pt=["src"],mt={class:"product-info"},gt={class:"product-title"},_t={class:"align-middle text-center"},ft={class:"count-input"},yt=["onClick","disabled"],kt=c((()=>(0,o._)("span",{class:"fas fa-minus"},null,-1))),wt=[kt],bt={class:"quantity"},vt=["onClick","disabled"],It=c((()=>(0,o._)("span",{class:"fas fa-plus"},null,-1))),xt=[It],St={class:"align-middle text-center text-lg text-medium"},Ct={class:"align-middle text-center text-lg text-medium"},Pt={class:"align-middle text-center"},qt=["onClick"],Tt=c((()=>(0,o._)("i",{class:"fa fa-trash delete-cart"},null,-1))),Et=[Tt],Dt={class:"floating-container"},Qt={class:"container"},zt={class:"shopping-cart-footer"},Zt={class:"column text-lg invoice-section sticky-column"},Nt=c((()=>(0,o._)("h4",null,"Products to Pay:",-1))),Rt={class:"table"},Wt=c((()=>(0,o._)("thead",null,[(0,o._)("tr",null,[(0,o._)("th",null,"Product Name"),(0,o._)("th",null,"Price")])],-1))),$t=c((()=>(0,o._)("h4",null,"Total:",-1))),Ot={class:"text-medium"},Mt={class:"column checkout-button-section"},jt={class:"shopping-cart-footer"},Ut={class:"column"},Ft={class:"column checkout-products-section"},At=c((()=>(0,o._)("h4",null,"Checkout Products:",-1))),Ht={class:"table"},Kt=c((()=>(0,o._)("thead",null,[(0,o._)("tr",null,[(0,o._)("th",{class:"text-center"},"Product Name"),(0,o._)("th",{class:"text-center"},"Quantity"),(0,o._)("th",{class:"text-center"},"Price"),(0,o._)("th",{class:"text-center"},"Total Price")])],-1)));function Yt(t,e,c,D,et,kt){const It=(0,o.up)("router-link"),Tt=(0,o.up)("star-rating"),Yt=(0,o.up)("Notification");return(0,o.wg)(),(0,o.iD)("div",n,[(0,o._)("div",{class:(0,i.C_)(["sidebar",{collapsed:et.isSidebarCollapsed}])},[(0,o._)("img",{src:s(2894),alt:"Mono",class:"logo"},null,8,l),(0,o.Wm)(It,{to:"/admin2"},{default:(0,o.w5)((()=>[r,d])),_:1}),(0,o._)("details",null,[u,(0,o._)("div",h,[(0,o.Wm)(It,{to:"/analytics2"},{default:(0,o.w5)((()=>[p,m])),_:1}),(0,o.Wm)(It,{to:"/shopinventory"},{default:(0,o.w5)((()=>[g,_])),_:1}),(0,o.Wm)(It,{to:"/cottagebooking"},{default:(0,o.w5)((()=>[f,y])),_:1}),(0,o.Wm)(It,{to:"/reservations"},{default:(0,o.w5)((()=>[k,w])),_:1}),(0,o.Wm)(It,{to:"/enrollment"},{default:(0,o.w5)((()=>[b,v])),_:1})])]),(0,o.Wm)(It,{to:"/teamadmin2"},{default:(0,o.w5)((()=>[I,x])),_:1}),(0,o.Wm)(It,{to:"/monitorusers2"},{default:(0,o.w5)((()=>[S,C])),_:1}),(0,o.Wm)(It,{to:"/pos2"},{default:(0,o.w5)((()=>[P,q])),_:1})],2),(0,o._)("div",T,[E,(0,o._)("button",{class:"navbar-toggler",type:"button",onClick:e[0]||(e[0]=(...t)=>kt.toggleSidebar&&kt.toggleSidebar(...t))},Q),(0,o._)("button",{onClick:e[1]||(e[1]=(...t)=>kt.logout&&kt.logout(...t)),class:"btn btn-custom logout-logo-btn"},[z,(0,o.Uk)(" Logout ")])]),(0,o._)("div",Z,[(0,o._)("div",N,[(0,o._)("div",R,[W,$,(0,o._)("div",O,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(et.shop,(t=>((0,o.wg)(),(0,o.iD)("div",M,[(0,o._)("div",j,[(0,o._)("div",U,[(0,o._)("img",{class:"custom-image",src:`https://eduardos-resort.online/backend/backend/public/uploads/${t.prod_img}`,alt:"Product"},null,8,F),(0,o._)("small",A," Php. "+(0,i.zw)(t.prod_price),1)]),(0,o._)("div",H,[(0,o._)("div",K,[(0,o._)("h5",Y,(0,i.zw)(t.prod_name),1),(0,o._)("div",B,[(0,o.Wm)(Tt,{initialRating:t.rating,onRatingSelected:e=>kt.updateRating(t.shop_id,e)},null,8,["initialRating","onRatingSelected"])])]),(0,o._)("div",L,[(0,o._)("small",V," Quantity: "+(0,i.zw)(t.prod_quantity),1)]),(0,o._)("p",G,(0,i.zw)(t.prod_desc),1),(0,o._)("div",J,[(0,o._)("div",X,[(0,o.wy)((0,o._)("input",{type:"number",class:"form-control text-center","onUpdate:modelValue":e[2]||(e[2]=t=>et.selectedQuantity=t),min:"1"},null,512),[[a.nr,et.selectedQuantity]])]),(0,o._)("button",{class:"btn btn-add",onClick:e=>kt.addCart(t.shop_id)},st,8,tt)])])])])))),256)),t.successMessage?((0,o.wg)(),(0,o.iD)("div",ot,(0,i.zw)(t.successMessage),1)):(0,o.kq)("",!0)]),(0,o._)("div",it,[et.deleteSuccess?((0,o.wg)(),(0,o.j4)(Yt,{key:0,show:et.deleteSuccess,type:"success",message:"Deleted successfully!"},null,8,["show"])):(0,o.kq)("",!0),(0,o._)("div",at,[(0,o._)("table",ct,[nt,(0,o._)("tbody",null,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(et.cart,(t=>((0,o.wg)(),(0,o.iD)("tr",{key:t.shop_id},[(0,o._)("td",lt,[(0,o._)("div",rt,[(0,o._)("div",dt,[(0,o.wy)((0,o._)("input",{type:"checkbox",id:"checkbox_"+t.cart_id,"onUpdate:modelValue":e[3]||(e[3]=t=>et.checkedItems=t),value:t.cart_id,onClick:e=>kt.check(t.cart_id)},null,8,ut),[[a.e8,et.checkedItems]]),(0,o._)("label",{class:"custom-control-label",for:"checkbox_"+t.cart_id},null,8,ht)]),(0,o._)("a",null,[(0,o._)("img",{class:"img-fluid menu",style:{width:"100%","max-width":"250px",height:"200px","margin-top":"5px"},src:`https://eduardos-resort.online/backend/backend/public/uploads/${kt.getImg(t).prod_img}`,alt:"Product"},null,8,pt)]),(0,o._)("div",mt,[(0,o._)("h4",gt,(0,i.zw)(kt.getInfo(t).prod_name),1)])])]),(0,o._)("td",_t,[(0,o._)("div",ft,[(0,o._)("button",{onClick:e=>kt.updateQuantity(t,"decrement"),class:"btn btn-primary btn-option rounded-circle",disabled:t.quantity<=1},wt,8,yt),(0,o._)("span",bt,(0,i.zw)(t.quantity),1),(0,o._)("button",{onClick:e=>kt.updateQuantity(t,"increment"),class:"btn btn-primary btn-option rounded-circle",disabled:t.quantity>=kt.getMaxQuantity(t)},xt,8,vt)])]),(0,o._)("td",St,(0,i.zw)(kt.getPrice(t).prod_price),1),(0,o._)("td",Ct,(0,i.zw)(kt.getTotal(t)),1),(0,o._)("td",Pt,[(0,o._)("button",{onClick:e=>kt.deleteCart(t.cart_id),class:"btn btn-danger delete-cart"},Et,8,qt)])])))),128))])])]),(0,o._)("div",Dt,[(0,o._)("div",Qt,[(0,o._)("div",zt,[(0,o._)("div",Zt,[Nt,(0,o._)("table",Rt,[Wt,(0,o._)("tbody",null,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(et.checkedItems,(t=>((0,o.wg)(),(0,o.iD)("tr",{key:t},[(0,o._)("td",null,(0,i.zw)(kt.getInfo(kt.getCartItem(t)).prod_name),1),(0,o._)("td",null,"Php."+(0,i.zw)(kt.getPrice(kt.getCartItem(t)).prod_price),1)])))),128))])]),(0,o._)("div",null,[$t,(0,o._)("span",Ot,"Php."+(0,i.zw)(kt.calculateSubtotal()),1)])]),(0,o._)("div",Mt,[(0,o._)("div",jt,[(0,o._)("div",Ut,[(0,o._)("a",{class:"btn btn-add",onClick:e[4]||(e[4]=(...t)=>kt.checkout&&kt.checkout(...t))},"Proceed to Checkout")])])])])])]),(0,o._)("div",Ft,[At,(0,o._)("table",Ht,[Kt,(0,o._)("tbody",null,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(et.checkedOutProducts,(t=>((0,o.wg)(),(0,o.iD)("tr",{key:t.cart_id},[(0,o._)("td",null,(0,i.zw)(kt.getInfo(t).prod_name),1),(0,o._)("td",null,"Php."+(0,i.zw)(kt.getPrice(t).prod_price),1),(0,o._)("td",null,(0,i.zw)(t.quantity),1),(0,o._)("td",null,"Php."+(0,i.zw)(kt.getTotal(t)),1)])))),128))])])]),et.insufficientStockError?((0,o.wg)(),(0,o.j4)(Yt,{key:1,show:et.insufficientStockError,type:"error",message:"Insufficient stock for one or more items"},null,8,["show"])):(0,o.kq)("",!0),et.notification.show?((0,o.wg)(),(0,o.j4)(Yt,{key:2,show:et.notification.show,type:et.notification.type,message:et.notification.message},null,8,["show","type","message"])):(0,o.kq)("",!0),et.checkoutSuccess?((0,o.wg)(),(0,o.j4)(Yt,{key:3,show:et.checkoutSuccess,type:"success",message:"Checkout successful!"},null,8,["show"])):(0,o.kq)("",!0),et.checkoutError?((0,o.wg)(),(0,o.j4)(Yt,{key:4,show:et.checkoutError,type:"error",message:"Please select items before proceeding with the checkout."},null,8,["show"])):(0,o.kq)("",!0)])]),(0,o.Wm)(Yt,{show:et.notification.show,type:et.notification.type,message:et.notification.message},null,8,["show","type","message"])])])])}s(560);var Bt=s(1076),Lt=s(9754),Vt={components:{Notification:Lt.Z},data(){return{isSidebarCollapsed:!1,cartCheckedOutIds:[],checkedItems:[],checkedOutProducts:[],cart:[],deleteSuccess:!1,prod_name:[],prod_price:[],prod_img:[],user:null,checkedItems:[],checkoutSuccess:!1,checkoutError:!1,insufficientStockError:!1,shop:[],name:[],quantity:1,selectedQuantity:1,notification:{show:!1,type:"",message:""}}},mounted(){this.getCart(),this.getInfo(),this.getPrice(),this.getImg(),this.getShop()},methods:{toggleSidebar(){this.isSidebarCollapsed=!this.isSidebarCollapsed},getCartItem(t){return this.cart.find((e=>e.cart_id===t))||{}},async logout(){try{const t=await Bt.Z.post("/logout");200===t.status&&(console.log("Logout successful"),sessionStorage.removeItem("token"),this.$router.push("/"))}catch(t){console.error("Error during logout",t)}},async getCart(){const t=sessionStorage.getItem("id");try{const[e,s,o]=await Promise.all([Bt.Z.get(`/getProd/${t}`),Bt.Z.get("/getData"),Bt.Z.get("/getShop")]);this.cart=e.data.map((t=>({...t,selected:!1}))),this.data=s.data,this.prod_name=o.data,this.prod_price=o.data,this.prod_img=o.data}catch(e){console.error("Error fetching cart:",e)}},getInfo(t){const e=this.prod_name.find((e=>e.shop_id===t.shop_id))||{};return console.log(`Product Name: ${e.prod_name}, Price: ${e.prod_price}`),e},getPrice(t){return this.prod_price.find((e=>e.shop_id===t.shop_id))||{}},getImg(t){return this.prod_img.find((e=>e.shop_id===t.shop_id))||{}},async deleteCart(t){const e=await new Promise((t=>{const e=window.confirm("Do you want to DELETE this item?");t(e),this.deleteSuccess=!0,setTimeout((()=>{this.deleteSuccess=!1}),2e3)}));if(e)try{await Bt.Z.post("del",{cart_id:t}),this.cart=this.cart.filter((e=>e.cart_id!==t)),this.deleteSuccess=!0,setTimeout((()=>{this.deleteSuccess=!1}),2e3)}catch(s){console.error("Error deleting item:",s)}},getMaxQuantity(t){const e=this.getInfo(t);return e.prod_quantity||0},updateQuantity(t,e){"increment"===e&&t.quantity<this.getMaxQuantity(t)?t.quantity++:"decrement"===e&&t.quantity>1&&t.quantity--,this.updateTotalPrice(t)},updateTotalPrice(t){const e=this.getInfo(t);e.prod_price,t.quantity;Bt.Z.post("/updateCartQuantity",{cart_id:t.cart_id,quantity:t.quantity}).then((t=>{console.log(t.data)})).catch((t=>{console.error("Error updating quantity:",t)}))},getTotal(t){const e=this.getInfo(t);return(e.prod_price||0)*t.quantity},calculateSubtotal(){const t=this.checkedItems.reduce(((t,e)=>{const s=this.cart.find((t=>t.cart_id===e));if(s){const o=this.getInfo(s),i=(o.prod_price||0)*s.quantity;return console.log(`Cart ID: ${e}, Product Name: ${o.prod_name}, Price: ${o.prod_price}, Item Total: ${i}`),t+i}return t}),0).toFixed(2);return console.log("Selected Items:",this.checkedItems),t},async checkout(){try{const t=sessionStorage.getItem("id");if(0===this.checkedItems.length)return console.warn("No items selected for checkout."),this.checkoutError=!0,void setTimeout((()=>{this.checkoutError=!1}),3e3);const e=this.checkedItems.map((t=>{const e=this.cart.find((e=>e.cart_id===t)),s=e?e.shop_id:null;return{shop_id:s,quantity:e?e.quantity:0,total_price:this.getTotal(e)}})),s={id:t,status:"pending",total_price:parseFloat(this.calculateSubtotal()),items:e},o=await Bt.Z.post("checkout",s);if(400===o.status)return console.warn("Insufficient stock for one or more items"),this.notification={show:!0,type:"error",message:"Insufficient stock for one or more items"},void setTimeout((()=>{this.notification={show:!1,type:"",message:""}}),3e3);if(200===o.status){o.data.invoice_id;const t=this.cart.filter((t=>this.checkedItems.includes(t.cart_id)));this.checkedOutProducts.push(...t),this.cart=this.cart.filter((t=>!this.checkedItems.includes(t.cart_id))),this.checkoutSuccess=!0,setTimeout((()=>{this.checkoutSuccess=!1,this.checkedItems=[]}),2e3)}else console.error("Checkout failed:",o.data.message)}catch(t){console.error("Checkout Error:",t)}},check(t){const e=this.checkedItems.indexOf(t);this.checkedItems=-1===e?[...this.checkedItems,t]:this.checkedItems.filter((e=>e!==t)),console.log("Selected Items:",this.checkedItems)},getcheckedItems(){return this.cart.filter((t=>t.selected))},updateRating(t,e){this.submitRatingToBackend(t,e)},updateQuantity(t){this.quantity+=t,this.quantity<1&&(this.quantity=1)},async submitRatingToBackend(t,e){try{const s=await Bt.Z.post("/submit-rating",{shop_id:t,rating:e});console.log(s.data)}catch(s){console.error(s)}},async getFeed(){const[t,e]=await Promise.all([Bt.Z.get("/getFeedback"),Bt.Z.get("/getData")]);this.feed=t.data,this.name=e.data},getName(t){return this.name.find((e=>e.id===t.id))||{}},async getRoom(){const t=await Bt.Z.get("/getRoom");this.room=t.data},async getShop(){const t=await Bt.Z.get("/getShop");this.shop=t.data},updateQuantity(t,e){t.selectedQuantity=(t.selectedQuantity||0)+e,t.selectedQuantity<0&&(t.selectedQuantity=0)},async addCart(t,e){try{const e=sessionStorage.getItem("id"),s=this.shop.find((e=>e.shop_id===t)),o=this.selectedQuantity;if(s.prod_quantity>=o){await Bt.Z.post("getCart",{shop_id:t,id:e,quantity:o});this.getCart(),this.showSuccessNotification("Product added to cart successfully"),setTimeout((()=>{this.successMessage=""}),2e3)}else this.showErrorNotification("Product is out of stock")}catch(s){console.error("Error adding to cart",s)}},showSuccessNotification(t){this.notification={show:!0,type:"success",message:t},setTimeout((()=>{this.notification.show=!1}),2e3)},showErrorNotification(t){this.notification={show:!0,type:"error",message:t},setTimeout((()=>{this.notification.show=!1}),2e3)},async checkout(){try{const t=sessionStorage.getItem("id");if(0===this.checkedItems.length)return console.warn("No items selected for checkout."),this.checkoutError=!0,void setTimeout((()=>{this.checkoutError=!1}),3e3);const e=this.checkedItems.map((t=>{const e=this.cart.find((e=>e.cart_id===t)),s=e?e.shop_id:null;return{shop_id:s,quantity:e?e.quantity:0,total_price:this.getTotal(e)}})),s={id:t,status:"pending",total_price:parseFloat(this.calculateSubtotal()),items:e},o=await Bt.Z.post("checkoutpos",s);if(400===o.status)return console.warn("Insufficient stock for one or more items"),this.notification={show:!0,type:"error",message:"Insufficient stock for one or more items"},void setTimeout((()=>{this.notification={show:!1,type:"",message:""}}),3e3);if(200===o.status){o.data.invoice_id;this.checkoutSuccess=!0,setTimeout((()=>{this.checkoutSuccess=!1,this.cart=this.cart.filter((t=>!this.checkedItems.includes(t.cart_id))),this.checkedItems=[]}),2e3)}else console.error("Checkout failed:",o.data.message)}catch(t){console.error("Checkout Error:",t)}}}},Gt=s(89);const Jt=(0,Gt.Z)(Vt,[["render",Yt],["__scopeId","data-v-1fc04d3b"]]);var Xt=Jt},2894:function(t,e,s){t.exports=s.p+"img/logo1.png.63b3f6c0.png"}}]);
//# sourceMappingURL=288.f778a619.js.map