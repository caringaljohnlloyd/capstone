"use strict";(self["webpackChunkeduardo_app"]=self["webpackChunkeduardo_app"]||[]).push([[89],{6089:function(t,e,a){a.r(e),a.d(e,{default:function(){return Xt}});var s=a(3396),l=a(7139);const n=t=>((0,s.dD)("data-v-58c25e84"),t=t(),(0,s.Cn)(),t),o={class:"main-content"},r=["src"],i=n((()=>(0,s._)("i",{class:"fa-solid fa-chart-simple"},null,-1))),d=n((()=>(0,s._)("span",null,"Business Dashboard",-1))),c=n((()=>(0,s._)("summary",{class:"inventory-summary"},[(0,s._)("i",{style:{padding:"10px",margin:"0"},class:"fa-solid fa-table"}),(0,s._)("span",{style:{padding:"0",margin:"0"},class:"dropdown-icon"},"â–¾"),(0,s._)("span",{style:{padding:"0",margin:"0"}},"Inventory Options")],-1))),h={class:"dropdown-menu"},u=n((()=>(0,s._)("i",{style:{"padding-right":"20px"},class:"fa-solid fa-house"},null,-1))),g=n((()=>(0,s._)("span",null,"Room Inventory",-1))),p=n((()=>(0,s._)("i",{style:{"padding-right":"20px"},class:"fa-solid fa-shop"},null,-1))),y=n((()=>(0,s._)("span",null,"Shop Inventory",-1))),m=n((()=>(0,s._)("i",{style:{"padding-right":"20px"},class:"fa-solid fa-shop"},null,-1))),_=n((()=>(0,s._)("span",null,"Cottage Inventory",-1))),f=n((()=>(0,s._)("i",{style:{"padding-right":"20px"},class:"fa-solid fa-utensils"},null,-1))),b=n((()=>(0,s._)("span",null,"Restaurant Reservations",-1))),w=n((()=>(0,s._)("i",{style:{"padding-right":"20px"},class:"fa-solid fa-person-swimming"},null,-1))),v=n((()=>(0,s._)("span",null,"Enrollment Inventory",-1))),k=n((()=>(0,s._)("i",{class:"fa-solid fa-people-group"},null,-1))),S=n((()=>(0,s._)("span",null,"Team",-1))),C=n((()=>(0,s._)("i",{class:"fas fa-user"},null,-1))),D=n((()=>(0,s._)("span",null,"Users",-1))),x=n((()=>(0,s._)("i",{class:"fa-solid fa-cart-plus"},null,-1))),R=n((()=>(0,s._)("span",null,"POS",-1))),I=n((()=>(0,s._)("i",{class:"fa-solid fa-cart-plus"},null,-1))),Z=n((()=>(0,s._)("span",null,"History",-1))),z={class:"header"},M=n((()=>(0,s._)("h1",{class:"h1-main"},"EDUARDO'S ADMIN",-1))),T=n((()=>(0,s._)("i",{class:"fa-solid fa-bars",style:{padding:"5px",margin:"5px",width:"40px"}},null,-1))),F=[T],H=n((()=>(0,s._)("i",{class:"fas fa-power-off logout-icon"},null,-1))),O={class:"card-main"},U=n((()=>(0,s._)("h1",null,"Room Analytics",-1))),W={key:0},A={key:1},E=n((()=>(0,s._)("h2",null,"Most Used Rooms",-1))),B=n((()=>(0,s._)("h2",null,"Monthly Bookings (Peak Season)",-1))),N=n((()=>(0,s._)("h2",null,"Total Revenue",-1))),$={class:"content"},L={class:"container-fluid"},Y={class:"card-container"},P={class:"row"},j={class:"card-main"},q=n((()=>(0,s._)("br",null,null,-1))),K=n((()=>(0,s._)("h2",{class:"fa-solid fa-chart-line"}," Sales Report",-1))),J=n((()=>(0,s._)("br",null,null,-1))),X={class:"card-main"},G={class:"card-main2",ref:"combinedCanvas"},Q={class:"card-wrapper"},V={class:"card card-default card-size carding"},tt=n((()=>(0,s._)("div",{class:"card-header"},[(0,s._)("h2",{class:"fa-solid fa-user"}," Users"),(0,s._)("br")],-1))),et={class:"card-body"},at={key:0},st={key:1},lt={class:"bg-primary d-flex justify-content-between flex-wrap p-4 text-white align-items-lg-end carding",style:{height:"100%",width:"100%"}},nt={class:"d-flex flex-column"},ot={class:"h3 text-white"},rt=n((()=>(0,s._)("span",{class:"text-white"},"Total Clients",-1))),it={class:"card-wrapper"},dt={class:"card card-default card-size carding"},ct=n((()=>(0,s._)("div",{class:"card-header"},[(0,s._)("h2",{class:"fa-solid fa-cart-shopping"}," E-Shop"),(0,s._)("br")],-1))),ht={class:"card-body"},ut={class:"bg-primary d-flex justify-content-between flex-wrap p-4 text-white align-items-lg-end carding",style:{height:"100%",width:"100%"}},gt={class:"d-flex flex-column"},pt={class:"h3 text-white"},yt=n((()=>(0,s._)("span",{class:"text-white"},"Items",-1))),mt={class:"card-wrapper"},_t={class:"card card-default card-size carding"},ft=n((()=>(0,s._)("div",{class:"card-header"},[(0,s._)("h2",{class:"fa-solid fa-address-book"}," Booking Count"),(0,s._)("br")],-1))),bt={class:"card-body"},wt={class:"bg-primary d-flex justify-content-between flex-wrap p-4 text-white align-items-lg-end carding",style:{height:"100%",width:"100%"}},vt={class:"d-flex flex-column"},kt={class:"h3 text-white"},St=n((()=>(0,s._)("span",{class:"text-white"},"Booking",-1))),Ct={class:"card-wrapper",style:{padding:"0"}},Dt={class:"card card-default",id:"user-acquisition"},xt={class:"card-header border-bottom pb-0"},Rt=n((()=>(0,s._)("h2",{class:"fa-solid fa-user-pen"}," User Acquisition",-1))),It=n((()=>(0,s._)("br",null,null,-1))),Zt={class:"table"},zt=n((()=>(0,s._)("thead",null,[(0,s._)("tr",null,[(0,s._)("th",null,"User"),(0,s._)("th",null,"Feedback"),(0,s._)("th",null,"Action")])],-1))),Mt=["onClick"],Tt=n((()=>(0,s._)("div",{class:"card-footer d-flex flex-wrap bg-white"},[(0,s._)("a",{href:"#",class:"text-uppercase py-3"},"Acquisition Report")],-1))),Ft=n((()=>(0,s._)("br",null,null,-1))),Ht={class:"card-wrapper"},Ot={class:"card card-default"},Ut=n((()=>(0,s._)("div",{class:"card-header"},[(0,s._)("h2",{class:"fa-solid fa-burger"}," Orders Inventory"),(0,s._)("br")],-1))),Wt={class:"card-body",style:{padding:"0"}},At={id:"ordersTable",class:"table-product",style:{width:"100%"}},Et=n((()=>(0,s._)("thead",null,[(0,s._)("tr",null,[(0,s._)("th",null,"Room ID"),(0,s._)("th",null,"Payment"),(0,s._)("th",null,"Status")])],-1))),Bt={key:0,class:"text-center mt-3"},Nt=n((()=>(0,s._)("div",{class:"spinner-border",role:"status"},[(0,s._)("span",{class:"sr-only"},"Loading...")],-1))),$t=[Nt],Lt={key:1,class:"alert alert-success mt-3",role:"alert"};function Yt(t,e,n,T,Nt,Yt){const Pt=(0,s.up)("Notification"),jt=(0,s.up)("router-link");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s.Wm)(Pt,{show:Nt.notification.show,type:Nt.notification.type,message:Nt.notification.message},null,8,["show","type","message"]),(0,s._)("div",o,[(0,s._)("div",{class:(0,l.C_)(["sidebar",{collapsed:Nt.isSidebarCollapsed}])},[(0,s._)("img",{src:a(2894),alt:"Mono",class:"logo"},null,8,r),(0,s.Wm)(jt,{to:"/admin2"},{default:(0,s.w5)((()=>[i,d])),_:1}),(0,s._)("details",null,[c,(0,s._)("div",h,[(0,s.Wm)(jt,{to:"/analytics2"},{default:(0,s.w5)((()=>[u,g])),_:1}),(0,s.Wm)(jt,{to:"/shopinventory"},{default:(0,s.w5)((()=>[p,y])),_:1}),(0,s.Wm)(jt,{to:"/cottagebooking"},{default:(0,s.w5)((()=>[m,_])),_:1}),(0,s.Wm)(jt,{to:"/reservations"},{default:(0,s.w5)((()=>[f,b])),_:1}),(0,s.Wm)(jt,{to:"/enrollment"},{default:(0,s.w5)((()=>[w,v])),_:1})])]),(0,s.Wm)(jt,{to:"/teamadmin2"},{default:(0,s.w5)((()=>[k,S])),_:1}),(0,s.Wm)(jt,{to:"/monitorusers2"},{default:(0,s.w5)((()=>[C,D])),_:1}),(0,s.Wm)(jt,{to:"/pos2"},{default:(0,s.w5)((()=>[x,R])),_:1}),(0,s.Wm)(jt,{to:"/history"},{default:(0,s.w5)((()=>[I,Z])),_:1})],2),(0,s._)("div",z,[M,(0,s._)("button",{class:"navbar-toggler",type:"button",onClick:e[0]||(e[0]=(...t)=>Yt.toggleSidebar&&Yt.toggleSidebar(...t))},F),(0,s._)("button",{onClick:e[1]||(e[1]=(...t)=>Yt.logout&&Yt.logout(...t)),class:"btn btn-custom logout-logo-btn"},[H,(0,s.Uk)(" Logout ")])]),(0,s._)("div",O,[(0,s._)("div",null,[U,Nt.loading?((0,s.wg)(),(0,s.iD)("div",W,"Loading...")):((0,s.wg)(),(0,s.iD)("div",A,[E,(0,s._)("ul",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(Nt.mostUsedRooms,(t=>((0,s.wg)(),(0,s.iD)("li",{key:t.room_id},(0,l.zw)(t.room_name)+" - "+(0,l.zw)(t.total_bookings)+" bookings ",1)))),128))]),B,(0,s._)("ul",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(Nt.monthlyBookings,(t=>((0,s.wg)(),(0,s.iD)("li",{key:t.month}," Month: "+(0,l.zw)(t.month)+", Bookings: "+(0,l.zw)(t.bookings_count),1)))),128))]),N,(0,s._)("p",null,(0,l.zw)(Nt.totalRevenue.total_revenue|t.currency),1)]))]),(0,s._)("div",$,[(0,s._)("div",L,[(0,s._)("div",Y,[(0,s._)("div",P,[(0,s._)("section",j,[q,K,J,(0,s._)("button",{class:"btn-custom",onClick:e[2]||(e[2]=(...t)=>Yt.printSalesReport&&Yt.printSalesReport(...t))},"Print Sales Report"),(0,s._)("div",X,[(0,s._)("button",{class:"btn-custom",onClick:e[3]||(e[3]=t=>Yt.updateChart("daily"))},"Daily"),(0,s._)("button",{class:"btn-custom",onClick:e[4]||(e[4]=t=>Yt.updateChart("monthly"))},"Monthly"),(0,s._)("button",{class:"btn-custom",onClick:e[5]||(e[5]=t=>Yt.updateChart("yearly"))},"Yearly")]),(0,s._)("canvas",G,null,512)]),(0,s._)("div",Q,[(0,s._)("div",V,[tt,(0,s._)("div",et,[Nt.loading?((0,s.wg)(),(0,s.iD)("div",at,"Loading...")):((0,s.wg)(),(0,s.iD)("div",st,[(0,s._)("div",lt,[(0,s._)("div",nt,[(0,s._)("span",ot,(0,l.zw)(Nt.numberOfClients),1),rt])])]))])])]),(0,s._)("div",it,[(0,s._)("div",dt,[ct,(0,s._)("div",ht,[(0,s._)("div",ut,[(0,s._)("div",gt,[(0,s._)("span",pt,(0,l.zw)(Nt.numberOfItems),1),yt])])])])]),(0,s._)("div",mt,[(0,s._)("div",_t,[ft,(0,s._)("div",bt,[(0,s._)("div",wt,[(0,s._)("div",vt,[(0,s._)("span",kt,(0,l.zw)(Nt.numberOfbooking),1),St])])])])]),(0,s._)("div",Ct,[(0,s._)("div",Dt,[(0,s._)("div",xt,[Rt,It,(0,s._)("table",Zt,[zt,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(Nt.feed,(t=>((0,s.wg)(),(0,s.iD)("tbody",{key:Nt.name.id},[(0,s._)("tr",null,[(0,s._)("td",null,(0,l.zw)(Yt.getName(t).name),1),(0,s._)("td",null,(0,l.zw)(t.feedback),1),(0,s._)("td",null,[(0,s._)("button",{onClick:e=>Yt.hideFeed(t.feed_id)},"Hide",8,Mt)])])])))),128))])]),Tt])]),Ft,(0,s._)("div",Ht,[(0,s._)("div",Ot,[Ut,(0,s._)("div",Wt,[(0,s._)("table",At,[Et,(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(Nt.book,(t=>((0,s.wg)(),(0,s.iD)("tr",{key:t.room_id},[(0,s._)("td",null,(0,l.zw)(t.room_id),1),(0,s._)("td",null,(0,l.zw)(t.payment_method),1),(0,s._)("td",null,(0,l.zw)(t.booking_status),1)])))),128))])]),Nt.loading?((0,s.wg)(),(0,s.iD)("div",Bt,$t)):(0,s.kq)("",!0),Nt.successMessage?((0,s.wg)(),(0,s.iD)("div",Lt,(0,l.zw)(Nt.successMessage),1)):(0,s.kq)("",!0)])])])])])])])])])],64)}a(560);var Pt=a(1076),jt=a(9646);jt.kL.register(...jt.zX);var qt={name:"analytics",data(){return{loading:!0,mostUsedRooms:[],monthlyBookings:[],totalRevenue:{},isSidebarCollapsed:!1,successMessage:"",loading:"",name:[],feed:[],book:[],notification:{show:!1,type:"",message:""},numberOfClients:0,numberOfItems:0,numberOfbooking:0,dailySales:{},monthlySales:{},yearlySales:{},dailyChart:null,monthlyChart:null,yearlyChart:null,combinedChart:null,currentReportType:"daily",reportData:{},monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"]}},mounted(){this.getData(),this.getShop(),this.getFeed(),this.getName(),this.getbook(),this.getHistory(),this.fetchCombinedSalesData()},filters:{currency(t){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(t)}},methods:{async fetchMostUsedRooms(){try{const t=await Pt.Z.get("/analytics/most-used-rooms");this.mostUsedRooms=t.data}catch(t){console.error("Error fetching most used rooms:",t)}},async fetchMonthlyBookings(){try{const t=await Pt.Z.get("/analytics/monthly-bookings");this.monthlyBookings=t.data}catch(t){console.error("Error fetching monthly bookings:",t)}},async fetchTotalRevenue(){try{const t=await Pt.Z.get("/analytics/total-revenue");this.totalRevenue=t.data}catch(t){console.error("Error fetching total revenue:",t)}finally{this.loading=!1}},toggleSidebar(){this.isSidebarCollapsed=!this.isSidebarCollapsed},async logout(){try{const t=await Pt.Z.post("/logout");200===t.status&&(console.log("Logout successful"),sessionStorage.removeItem("token"),this.$router.push("/"))}catch(t){console.error("Error during logout",t)}},printSalesReport(){const t=window.open("","_blank");t.document.write(`\n    <html>\n      <head>\n        <title>Sales Report</title>\n        <style>\n          @media print {\n            /* Hide header and footer on print */\n            #header, #footer {\n              display: none;\n            }\n          }\n          table {\n            border-collapse: collapse;\n            width: 100%;\n          }\n          th, td {\n            border: 1px solid #dddddd;\n            text-align: left;\n            padding: 8px;\n          }\n          th {\n            background-color: #f2f2f2;\n          }\n          #header, #footer {\n            position: fixed;\n            left: 0;\n            right: 0;\n            color: #777;\n          }\n          #header {\n            top: 0;\n            text-align: center;\n          }\n          #footer {\n            bottom: 0;\n            text-align: center;\n          }\n        </style>\n      </head>\n      <body>\n        <div id="header">\n  <img src="https://example.com/your-image.jpg" alt="Header Image" style="width: 100%;" />\n</div>\n\n        <h2 style="text-align: center;">Sales Report</h2>\n        <table>\n          <thead>\n            <tr>\n              <th>Date</th>\n              <th>Total Sales</th>\n            </tr>\n          </thead>\n          <tbody>\n            ${this.generateTableRows()} \n          </tbody>\n        </table>\n        <div id="footer">\n          <img src="../assets/img/pool3.jpg" alt="Footer Image" style="width: 100%;" />\n        </div>\n      </body>\n    </html>\n  `),t.document.close(),t.print()},generateTableRows(){let t="";const e=this.reportData[this.currentReportType+"Sales"];return e&&e.forEach((e=>{t+=`\n        <tr>\n          <td>${this.getDateLabel(e)}</td>\n          <td>${e.total_sales}</td>\n        </tr>\n      `})),t},getDateLabel(t){return"monthly"===this.currentReportType?`${this.monthNames[parseInt(t.month)-1]} ${t.year}`:"yearly"===this.currentReportType?t.year.toString():t.date},fetchCombinedSalesData(){Pt.Z.get("generateAllReports").then((t=>{this.reportData=t.data,console.log("Fetched report data:",this.reportData),this.updateChart(this.currentReportType)})).catch((t=>{console.error("Failed to fetch sales data",t)}))},renderCombinedChart(){const t=this.$refs.combinedCanvas.getContext("2d");this.combinedChart&&this.combinedChart.destroy();const e=this.getDataConfig();this.combinedChart=new jt.kL(t,{type:"bar",data:e.data,options:{responsive:!0,maintainAspectRatio:!0,aspectRatio:4}})},getDataConfig(){const t={daily:{data:{labels:this.reportData.dailySales.map((t=>t.date)),datasets:[{label:"Daily Sales",data:this.reportData.dailySales.map((t=>t.total_sales)),backgroundColor:"rgba(54, 162, 235, 0.5)",borderColor:"rgba(54, 162, 235, 1)",borderWidth:1}]},options:{scales:{y:{beginAtZero:!0}}}},monthly:{data:{labels:this.reportData.monthlySales.map((t=>`${this.monthNames[parseInt(t.month)-1]} ${t.year}`)),datasets:[{label:"Monthly Sales",data:this.reportData.monthlySales.map((t=>t.total_sales)),backgroundColor:"rgba(255, 99, 132, 0.5)",borderColor:"rgba(255, 99, 132, 1)",borderWidth:1}]},options:{scales:{y:{beginAtZero:!0}}}},yearly:{data:{labels:this.reportData.yearlySales.map((t=>t.year.toString())),datasets:[{label:"Yearly Sales",data:this.reportData.yearlySales.map((t=>t.total_sales)),backgroundColor:"rgba(75, 192, 192, 0.5)",borderColor:"rgba(75, 192, 192, 1)",borderWidth:1}]},options:{scales:{y:{beginAtZero:!0},x:{ticks:{autoSkip:!1}}}}}};return t[this.currentReportType]},updateChart(t){this.currentReportType=t,this.renderCombinedChart()},async hideFeed(t){const e=window.confirm("Do you want to HIDE this item?");if(e)try{await Pt.Z.post(`/api/feedback/hide/${t}`),this.feed=this.feed.map((e=>e.feed_id===t?{...e,is_hidden:1}:e)),console.log("Feedback hidden successfully"),this.getFeed()}catch(a){console.error("Error hiding feedback:",a)}},async getFeed(){const[t,e]=await Promise.all([Pt.Z.get("/getFeedback"),Pt.Z.get("/getData")]);this.feed=t.data,this.name=e.data},getName(t){return this.name.find((e=>e.id===t.id))||{}},async getData(){const t=await Pt.Z.get("/getData");this.data=t.data,this.numberOfClients=this.data.length},async getShop(){const t=await Pt.Z.get("/getShop");this.data=t.data,this.numberOfItems=this.data.length},async getHistory(){const t=await Pt.Z.get("/getBookingHistory");this.book=t.data},async getbook(){const t=await Pt.Z.get("/getbook");this.data=t.data,this.numberOfbooking=this.data.length},fetchDailySales(){Pt.Z.get("/sales-report/daily").then((t=>{this.dailySales=t.data})).catch((t=>{console.error("Error fetching daily sales:",t)}))},fetchMonthlySales(){Pt.Z.get("/sales-report/monthly").then((t=>{this.monthlySales=t.data})).catch((t=>{console.error("Error fetching monthly sales:",t)}))},fetchYearlySales(){Pt.Z.get("/sales-report/yearly").then((t=>{this.yearlySales=t.data})).catch((t=>{console.error("Error fetching yearly sales:",t)}))}},filters:{currency(t){const e=parseFloat(t);return new Intl.NumberFormat("en-PH",{style:"currency",currency:"PHP"}).format(e)}},created(){this.fetchDailySales(),this.fetchMonthlySales(),this.fetchYearlySales(),this.fetchMostUsedRooms(),this.fetchMonthlyBookings(),this.fetchTotalRevenue()}},Kt=a(89);const Jt=(0,Kt.Z)(qt,[["render",Yt],["__scopeId","data-v-58c25e84"]]);var Xt=Jt},2894:function(t,e,a){t.exports=a.p+"img/logo1.png.63b3f6c0.png"}}]);
//# sourceMappingURL=89.40eaa650.js.map