"use strict";(self["webpackChunkeduardo_app"]=self["webpackChunkeduardo_app"]||[]).push([[746],{746:function(t,e,s){s.r(e),s.d(e,{default:function(){return Gt}});var o=s(3396),i=s(7139),a=s(9242);const c=t=>((0,o.dD)("data-v-59a777cc"),t=t(),(0,o.Cn)(),t),n={class:"main-content"},l=["src"],r=c((()=>(0,o._)("i",{class:"fa-solid fa-chart-simple"},null,-1))),d=c((()=>(0,o._)("span",null,"Business Dashboard",-1))),u=c((()=>(0,o._)("summary",null,[(0,o._)("i",{class:"fa-solid fa-chart-line"}),(0,o.Uk)(" Inventory Options ")],-1))),h={class:"dropdown-menu"},p=c((()=>(0,o._)("i",{class:"fa-solid fa-chart-line"},null,-1))),m=c((()=>(0,o._)("span",null,"Room Inventory",-1))),_=c((()=>(0,o._)("i",{class:"fa-solid fa-chart-line"},null,-1))),g=c((()=>(0,o._)("span",null,"Shop Inventory",-1))),f=c((()=>(0,o._)("i",{class:"fa-solid fa-chart-line"},null,-1))),y=c((()=>(0,o._)("span",null,"Restaurant Reservations",-1))),k=c((()=>(0,o._)("i",{class:"fa-solid fa-chart-line"},null,-1))),w=c((()=>(0,o._)("span",null,"Enrollment Inventory",-1))),b=c((()=>(0,o._)("i",{class:"fa-solid fa-people-group"},null,-1))),v=c((()=>(0,o._)("span",null,"Team",-1))),I=c((()=>(0,o._)("i",{class:"fas fa-user"},null,-1))),S=c((()=>(0,o._)("span",null,"Users",-1))),x=c((()=>(0,o._)("i",{class:"fa-solid fa-table-columns"},null,-1))),C=c((()=>(0,o._)("span",null,"POS",-1))),P={class:"header"},q=c((()=>(0,o._)("h1",{class:"h1-main"},"EDUARDO'S ADMIN",-1))),T=c((()=>(0,o._)("i",{class:"fa-solid fa-bars",style:{padding:"5px",margin:"5px",width:"40px"}},null,-1))),E=[T],D=c((()=>(0,o._)("i",{class:"fas fa-power-off logout-icon"},null,-1))),Q={class:"card-main"},z={class:"content"},Z={class:"row"},N=c((()=>(0,o._)("h2",{class:"fa-solid fa-cart-plus"}," POS",-1))),R=c((()=>(0,o._)("br",null,null,-1))),W={class:"row g-4"},$={class:"col-lg-4 col-md-6 wow fadeInUp","data-wow-delay":"0.1s"},O={class:"room-item shadow rounded overflow-hidden card-menu"},M={class:"position-relative"},j=["src"],U={class:"position-absolute start-0 top-100 translate-middle-y bg-primary text-white rounded py-1 px-3 ms-4"},F={class:"p-4 mt-2"},A={class:"d-flex justify-content-between mb-3"},H={class:"mb-0 text-dark"},K={class:"ps-2"},Y={class:"d-flex mb-3"},B={class:"border-end me-3 pe-3"},L={class:"text-body mb-3"},V={class:"d-flex justify-content-between"},G={class:"input-group"},J=["onClick"],X=c((()=>(0,o._)("i",{class:"fa fa-shopping-cart add-cart"}," Add to Cart ",-1))),tt=[X],et={key:0,class:"alert alert-primary mt-3",role:"alert"},st={class:"card card-default"},ot={class:"table-responsive"},it={class:"table"},at=c((()=>(0,o._)("thead",null,[(0,o._)("tr",null,[(0,o._)("th",{class:"text-center"},"Product Name"),(0,o._)("th",{class:"text-center"},"Quantity"),(0,o._)("th",{class:"text-center"},"Price"),(0,o._)("th",{class:"text-center"},"Total Price"),(0,o._)("th",{class:"text-center"},"Action")])],-1))),ct={class:"align-middle"},nt={class:"product-item"},lt={class:"custom-control custom-checkbox",style:{float:"left","margin-right":"10px","margin-top":"10px"}},rt=["id","value","onClick"],dt=["for"],ut=["src"],ht={class:"product-info"},pt={class:"product-title"},mt={class:"align-middle text-center"},_t={class:"count-input"},gt=["onClick","disabled"],ft=c((()=>(0,o._)("span",{class:"fas fa-minus"},null,-1))),yt=[ft],kt={class:"quantity"},wt=["onClick","disabled"],bt=c((()=>(0,o._)("span",{class:"fas fa-plus"},null,-1))),vt=[bt],It={class:"align-middle text-center text-lg text-medium"},St={class:"align-middle text-center text-lg text-medium"},xt={class:"align-middle text-center"},Ct=["onClick"],Pt=c((()=>(0,o._)("i",{class:"fa fa-trash delete-cart"},null,-1))),qt=[Pt],Tt={class:"floating-container"},Et={class:"container"},Dt={class:"shopping-cart-footer"},Qt={class:"column text-lg invoice-section sticky-column"},zt=c((()=>(0,o._)("h4",null,"Products to Pay:",-1))),Zt={class:"table"},Nt=c((()=>(0,o._)("thead",null,[(0,o._)("tr",null,[(0,o._)("th",null,"Product Name"),(0,o._)("th",null,"Price")])],-1))),Rt=c((()=>(0,o._)("h4",null,"Total:",-1))),Wt={class:"text-medium"},$t={class:"column checkout-button-section"},Ot={class:"shopping-cart-footer"},Mt={class:"column"},jt={class:"column checkout-products-section"},Ut=c((()=>(0,o._)("h4",null,"Checkout Products:",-1))),Ft={class:"table"},At=c((()=>(0,o._)("thead",null,[(0,o._)("tr",null,[(0,o._)("th",{class:"text-center"},"Product Name"),(0,o._)("th",{class:"text-center"},"Quantity"),(0,o._)("th",{class:"text-center"},"Price"),(0,o._)("th",{class:"text-center"},"Total Price")])],-1)));function Ht(t,e,c,T,X,ft){const bt=(0,o.up)("router-link"),Pt=(0,o.up)("star-rating"),Ht=(0,o.up)("Notification");return(0,o.wg)(),(0,o.iD)("div",n,[(0,o._)("div",{class:(0,i.C_)(["sidebar",{collapsed:X.isSidebarCollapsed}])},[(0,o._)("img",{src:s(2894),alt:"Mono",class:"logo"},null,8,l),(0,o.Wm)(bt,{to:"/admin2"},{default:(0,o.w5)((()=>[r,d])),_:1}),(0,o._)("details",null,[u,(0,o._)("div",h,[(0,o.Wm)(bt,{to:"/analytics2"},{default:(0,o.w5)((()=>[p,m])),_:1}),(0,o.Wm)(bt,{to:"/shopinventory"},{default:(0,o.w5)((()=>[_,g])),_:1}),(0,o.Wm)(bt,{to:"/reservations"},{default:(0,o.w5)((()=>[f,y])),_:1}),(0,o.Wm)(bt,{to:"/enrollment"},{default:(0,o.w5)((()=>[k,w])),_:1})])]),(0,o.Wm)(bt,{to:"/teamadmin2"},{default:(0,o.w5)((()=>[b,v])),_:1}),(0,o.Wm)(bt,{to:"/monitorusers2"},{default:(0,o.w5)((()=>[I,S])),_:1}),(0,o.Wm)(bt,{to:"/pos2"},{default:(0,o.w5)((()=>[x,C])),_:1})],2),(0,o._)("div",P,[q,(0,o._)("button",{class:"navbar-toggler",type:"button",onClick:e[0]||(e[0]=(...t)=>ft.toggleSidebar&&ft.toggleSidebar(...t))},E),(0,o._)("button",{onClick:e[1]||(e[1]=(...t)=>ft.logout&&ft.logout(...t)),class:"btn btn-custom logout-logo-btn"},[D,(0,o.Uk)(" Logout ")])]),(0,o._)("div",Q,[(0,o._)("div",z,[(0,o._)("div",Z,[N,R,(0,o._)("div",W,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(X.shop,(t=>((0,o.wg)(),(0,o.iD)("div",$,[(0,o._)("div",O,[(0,o._)("div",M,[(0,o._)("img",{class:"custom-image",src:`https://eduardos-resort.online/backend/backend/public/uploads/${t.prod_img}`,alt:"Product"},null,8,j),(0,o._)("small",U," Php. "+(0,i.zw)(t.prod_price),1)]),(0,o._)("div",F,[(0,o._)("div",A,[(0,o._)("h5",H,(0,i.zw)(t.prod_name),1),(0,o._)("div",K,[(0,o.Wm)(Pt,{initialRating:t.rating,onRatingSelected:e=>ft.updateRating(t.shop_id,e)},null,8,["initialRating","onRatingSelected"])])]),(0,o._)("div",Y,[(0,o._)("small",B," Quantity: "+(0,i.zw)(t.prod_quantity),1)]),(0,o._)("p",L,(0,i.zw)(t.prod_desc),1),(0,o._)("div",V,[(0,o._)("div",G,[(0,o.wy)((0,o._)("input",{type:"number",class:"form-control text-center","onUpdate:modelValue":e[2]||(e[2]=t=>X.selectedQuantity=t),min:"1"},null,512),[[a.nr,X.selectedQuantity]])]),(0,o._)("button",{class:"btn btn-add",onClick:e=>ft.addCart(t.shop_id)},tt,8,J)])])])])))),256)),t.successMessage?((0,o.wg)(),(0,o.iD)("div",et,(0,i.zw)(t.successMessage),1)):(0,o.kq)("",!0)]),(0,o._)("div",st,[X.deleteSuccess?((0,o.wg)(),(0,o.j4)(Ht,{key:0,show:X.deleteSuccess,type:"success",message:"Deleted successfully!"},null,8,["show"])):(0,o.kq)("",!0),(0,o._)("div",ot,[(0,o._)("table",it,[at,(0,o._)("tbody",null,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(X.cart,(t=>((0,o.wg)(),(0,o.iD)("tr",{key:t.shop_id},[(0,o._)("td",ct,[(0,o._)("div",nt,[(0,o._)("div",lt,[(0,o.wy)((0,o._)("input",{type:"checkbox",id:"checkbox_"+t.cart_id,"onUpdate:modelValue":e[3]||(e[3]=t=>X.checkedItems=t),value:t.cart_id,onClick:e=>ft.check(t.cart_id)},null,8,rt),[[a.e8,X.checkedItems]]),(0,o._)("label",{class:"custom-control-label",for:"checkbox_"+t.cart_id},null,8,dt)]),(0,o._)("a",null,[(0,o._)("img",{class:"img-fluid menu",style:{width:"100%","max-width":"250px",height:"200px","margin-top":"5px"},src:`https://eduardos-resort.online/backend/backend/public/uploads/${ft.getImg(t).prod_img}`,alt:"Product"},null,8,ut)]),(0,o._)("div",ht,[(0,o._)("h4",pt,(0,i.zw)(ft.getInfo(t).prod_name),1)])])]),(0,o._)("td",mt,[(0,o._)("div",_t,[(0,o._)("button",{onClick:e=>ft.updateQuantity(t,"decrement"),class:"btn btn-primary btn-option rounded-circle",disabled:t.quantity<=1},yt,8,gt),(0,o._)("span",kt,(0,i.zw)(t.quantity),1),(0,o._)("button",{onClick:e=>ft.updateQuantity(t,"increment"),class:"btn btn-primary btn-option rounded-circle",disabled:t.quantity>=ft.getMaxQuantity(t)},vt,8,wt)])]),(0,o._)("td",It,(0,i.zw)(ft.getPrice(t).prod_price),1),(0,o._)("td",St,(0,i.zw)(ft.getTotal(t)),1),(0,o._)("td",xt,[(0,o._)("button",{onClick:e=>ft.deleteCart(t.cart_id),class:"btn btn-danger delete-cart"},qt,8,Ct)])])))),128))])])]),(0,o._)("div",Tt,[(0,o._)("div",Et,[(0,o._)("div",Dt,[(0,o._)("div",Qt,[zt,(0,o._)("table",Zt,[Nt,(0,o._)("tbody",null,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(X.checkedItems,(t=>((0,o.wg)(),(0,o.iD)("tr",{key:t},[(0,o._)("td",null,(0,i.zw)(ft.getInfo(ft.getCartItem(t)).prod_name),1),(0,o._)("td",null,"Php."+(0,i.zw)(ft.getPrice(ft.getCartItem(t)).prod_price),1)])))),128))])]),(0,o._)("div",null,[Rt,(0,o._)("span",Wt,"Php."+(0,i.zw)(ft.calculateSubtotal()),1)])]),(0,o._)("div",$t,[(0,o._)("div",Ot,[(0,o._)("div",Mt,[(0,o._)("a",{class:"btn btn-add",onClick:e[4]||(e[4]=(...t)=>ft.checkout&&ft.checkout(...t))},"Proceed to Checkout")])])])])])]),(0,o._)("div",jt,[Ut,(0,o._)("table",Ft,[At,(0,o._)("tbody",null,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(X.checkedOutProducts,(t=>((0,o.wg)(),(0,o.iD)("tr",{key:t.cart_id},[(0,o._)("td",null,(0,i.zw)(ft.getInfo(t).prod_name),1),(0,o._)("td",null,"Php."+(0,i.zw)(ft.getPrice(t).prod_price),1),(0,o._)("td",null,(0,i.zw)(t.quantity),1),(0,o._)("td",null,"Php."+(0,i.zw)(ft.getTotal(t)),1)])))),128))])])]),X.insufficientStockError?((0,o.wg)(),(0,o.j4)(Ht,{key:1,show:X.insufficientStockError,type:"error",message:"Insufficient stock for one or more items"},null,8,["show"])):(0,o.kq)("",!0),X.notification.show?((0,o.wg)(),(0,o.j4)(Ht,{key:2,show:X.notification.show,type:X.notification.type,message:X.notification.message},null,8,["show","type","message"])):(0,o.kq)("",!0),X.checkoutSuccess?((0,o.wg)(),(0,o.j4)(Ht,{key:3,show:X.checkoutSuccess,type:"success",message:"Checkout successful!"},null,8,["show"])):(0,o.kq)("",!0),X.checkoutError?((0,o.wg)(),(0,o.j4)(Ht,{key:4,show:X.checkoutError,type:"error",message:"Please select items before proceeding with the checkout."},null,8,["show"])):(0,o.kq)("",!0)])]),(0,o.Wm)(Ht,{show:X.notification.show,type:X.notification.type,message:X.notification.message},null,8,["show","type","message"])])])])}s(560);var Kt=s(1076),Yt=s(9754),Bt={components:{Notification:Yt.Z},data(){return{isSidebarCollapsed:!1,cartCheckedOutIds:[],checkedItems:[],checkedOutProducts:[],cart:[],deleteSuccess:!1,prod_name:[],prod_price:[],prod_img:[],user:null,checkedItems:[],checkoutSuccess:!1,checkoutError:!1,insufficientStockError:!1,shop:[],name:[],quantity:1,selectedQuantity:1,notification:{show:!1,type:"",message:""}}},mounted(){this.getCart(),this.getInfo(),this.getPrice(),this.getImg(),this.getShop()},methods:{toggleSidebar(){this.isSidebarCollapsed=!this.isSidebarCollapsed},getCartItem(t){return this.cart.find((e=>e.cart_id===t))||{}},async logout(){try{const t=await Kt.Z.post("/logout");200===t.status&&(console.log("Logout successful"),sessionStorage.removeItem("token"),this.$router.push("/"))}catch(t){console.error("Error during logout",t)}},async getCart(){const t=sessionStorage.getItem("id");try{const[e,s,o]=await Promise.all([Kt.Z.get(`/getProd/${t}`),Kt.Z.get("/getData"),Kt.Z.get("/getShop")]);this.cart=e.data.map((t=>({...t,selected:!1}))),this.data=s.data,this.prod_name=o.data,this.prod_price=o.data,this.prod_img=o.data}catch(e){console.error("Error fetching cart:",e)}},getInfo(t){const e=this.prod_name.find((e=>e.shop_id===t.shop_id))||{};return console.log(`Product Name: ${e.prod_name}, Price: ${e.prod_price}`),e},getPrice(t){return this.prod_price.find((e=>e.shop_id===t.shop_id))||{}},getImg(t){return this.prod_img.find((e=>e.shop_id===t.shop_id))||{}},async deleteCart(t){const e=await new Promise((t=>{const e=window.confirm("Do you want to DELETE this item?");t(e),this.deleteSuccess=!0,setTimeout((()=>{this.deleteSuccess=!1}),2e3)}));if(e)try{await Kt.Z.post("del",{cart_id:t}),this.cart=this.cart.filter((e=>e.cart_id!==t)),this.deleteSuccess=!0,setTimeout((()=>{this.deleteSuccess=!1}),2e3)}catch(s){console.error("Error deleting item:",s)}},getMaxQuantity(t){const e=this.getInfo(t);return e.prod_quantity||0},updateQuantity(t,e){"increment"===e&&t.quantity<this.getMaxQuantity(t)?t.quantity++:"decrement"===e&&t.quantity>1&&t.quantity--,this.updateTotalPrice(t)},updateTotalPrice(t){const e=this.getInfo(t);e.prod_price,t.quantity;Kt.Z.post("/updateCartQuantity",{cart_id:t.cart_id,quantity:t.quantity}).then((t=>{console.log(t.data)})).catch((t=>{console.error("Error updating quantity:",t)}))},getTotal(t){const e=this.getInfo(t);return(e.prod_price||0)*t.quantity},calculateSubtotal(){const t=this.checkedItems.reduce(((t,e)=>{const s=this.cart.find((t=>t.cart_id===e));if(s){const o=this.getInfo(s),i=(o.prod_price||0)*s.quantity;return console.log(`Cart ID: ${e}, Product Name: ${o.prod_name}, Price: ${o.prod_price}, Item Total: ${i}`),t+i}return t}),0).toFixed(2);return console.log("Selected Items:",this.checkedItems),t},async checkout(){try{const t=sessionStorage.getItem("id");if(0===this.checkedItems.length)return console.warn("No items selected for checkout."),this.checkoutError=!0,void setTimeout((()=>{this.checkoutError=!1}),3e3);const e=this.checkedItems.map((t=>{const e=this.cart.find((e=>e.cart_id===t)),s=e?e.shop_id:null;return{shop_id:s,quantity:e?e.quantity:0,total_price:this.getTotal(e)}})),s={id:t,status:"pending",total_price:parseFloat(this.calculateSubtotal()),items:e},o=await Kt.Z.post("checkout",s);if(400===o.status)return console.warn("Insufficient stock for one or more items"),this.notification={show:!0,type:"error",message:"Insufficient stock for one or more items"},void setTimeout((()=>{this.notification={show:!1,type:"",message:""}}),3e3);if(200===o.status){o.data.invoice_id;const t=this.cart.filter((t=>this.checkedItems.includes(t.cart_id)));this.checkedOutProducts.push(...t),this.cart=this.cart.filter((t=>!this.checkedItems.includes(t.cart_id))),this.checkoutSuccess=!0,setTimeout((()=>{this.checkoutSuccess=!1,this.checkedItems=[]}),2e3)}else console.error("Checkout failed:",o.data.message)}catch(t){console.error("Checkout Error:",t)}},check(t){const e=this.checkedItems.indexOf(t);this.checkedItems=-1===e?[...this.checkedItems,t]:this.checkedItems.filter((e=>e!==t)),console.log("Selected Items:",this.checkedItems)},getcheckedItems(){return this.cart.filter((t=>t.selected))},updateRating(t,e){this.submitRatingToBackend(t,e)},updateQuantity(t){this.quantity+=t,this.quantity<1&&(this.quantity=1)},async submitRatingToBackend(t,e){try{const s=await Kt.Z.post("/submit-rating",{shop_id:t,rating:e});console.log(s.data)}catch(s){console.error(s)}},async getFeed(){const[t,e]=await Promise.all([Kt.Z.get("/getFeedback"),Kt.Z.get("/getData")]);this.feed=t.data,this.name=e.data},getName(t){return this.name.find((e=>e.id===t.id))||{}},async getRoom(){const t=await Kt.Z.get("/getRoom");this.room=t.data},async getShop(){const t=await Kt.Z.get("/getShop");this.shop=t.data},updateQuantity(t,e){t.selectedQuantity=(t.selectedQuantity||0)+e,t.selectedQuantity<0&&(t.selectedQuantity=0)},async addCart(t,e){try{const e=sessionStorage.getItem("id"),s=this.shop.find((e=>e.shop_id===t)),o=this.selectedQuantity;if(s.prod_quantity>=o){await Kt.Z.post("getCart",{shop_id:t,id:e,quantity:o});this.getCart(),this.showSuccessNotification("Product added to cart successfully"),setTimeout((()=>{this.successMessage=""}),2e3)}else this.showErrorNotification("Product is out of stock")}catch(s){console.error("Error adding to cart",s)}},showSuccessNotification(t){this.notification={show:!0,type:"success",message:t},setTimeout((()=>{this.notification.show=!1}),2e3)},showErrorNotification(t){this.notification={show:!0,type:"error",message:t},setTimeout((()=>{this.notification.show=!1}),2e3)},async checkout(){try{const t=sessionStorage.getItem("id");if(0===this.checkedItems.length)return console.warn("No items selected for checkout."),this.checkoutError=!0,void setTimeout((()=>{this.checkoutError=!1}),3e3);const e=this.checkedItems.map((t=>{const e=this.cart.find((e=>e.cart_id===t)),s=e?e.shop_id:null;return{shop_id:s,quantity:e?e.quantity:0,total_price:this.getTotal(e)}})),s={id:t,status:"pending",total_price:parseFloat(this.calculateSubtotal()),items:e},o=await Kt.Z.post("checkoutpos",s);if(400===o.status)return console.warn("Insufficient stock for one or more items"),this.notification={show:!0,type:"error",message:"Insufficient stock for one or more items"},void setTimeout((()=>{this.notification={show:!1,type:"",message:""}}),3e3);if(200===o.status){o.data.invoice_id;this.checkoutSuccess=!0,setTimeout((()=>{this.checkoutSuccess=!1,this.cart=this.cart.filter((t=>!this.checkedItems.includes(t.cart_id))),this.checkedItems=[]}),2e3)}else console.error("Checkout failed:",o.data.message)}catch(t){console.error("Checkout Error:",t)}}}},Lt=s(89);const Vt=(0,Lt.Z)(Bt,[["render",Ht],["__scopeId","data-v-59a777cc"]]);var Gt=Vt},2894:function(t,e,s){t.exports=s.p+"img/logo1.png.63b3f6c0.png"}}]);
//# sourceMappingURL=746.ae4f659e.js.map